<html>
    <head>
        <title>Application 1</title>
        
        <script type="text/javascript" src="https://cdns.gigya.com/js/gigya.js?apiKey=3_OpyagoDK701Lv3rCsHO3Pwsw8GU3Zr0T60XRNueQAiQkEMO-NEUT--9UnVfcub-m"></script>
        <!--Above we put in the API Key of the site whose screensets we want to host here -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="/css/application1.css">
        
        <script>
            $(document).ready(function(){//When the document is loaded    
                $('.logged-in').fadeOut(function () { //disable all the buttons which should only be visible to logged-out users.
					$('.logged-out').fadeIn(); // Enable all the buttons those should be visible to Logged-out users.
					});
                
                gigya.accounts.getAccountInfo({callback:function (response) {//Checking if user have a prior session available
				if (response.errorCode == 0) {
					  $('#profile-name').text("Welcome back " + response.profile.firstName + "!");
					  $('.logged-out').fadeOut(function () { //enable all the buttons which should only be visible to logged in users. 
							  $('.logged-in').fadeIn(); //Disable all the buttons which should not be visible to logged in Users 
					  });
                }
                }});

                gigya.socialize.addEventHandlers({
		            onLogin: loginHandler, //Mapped the function which have to be invoked in case of Login Event.
				    onLogout: logoutHandler //Mapped the function which have to be invoked in case of Logout Event.
	            });

            })
            
            function login(){ //loading login screen.
                var params = {
                    screenSet: 'Default-RegistrationLogin',
                    startScreen: 'gigya-login-screen'
                };
                gigya.accounts.showScreenSet(params);
            }

            function register(){// loading registration screen.
                var params = {
                    screenSet: 'Default-RegistrationLogin',
                    startScreen: 'gigya-register-screen'
                };
                gigya.accounts.showScreenSet(params);
            }

            function profile_update(){// loading profile update screen.
                var params = {
                    screenSet: 'Default-ProfileUpdate',
                    startScreen: 'gigya-update-profile-screen'
                };
                gigya.accounts.showScreenSet(params);
            }

            function subscribe(){// loading Lite Registration Screen
                var params = {
                    screenSet: 'Default-LiteRegistration',
                    startScreen: 'gigya-subscribe-with-email-screen'
                };
                gigya.accounts.showScreenSet(params);
            }

            function logout(){//triggering Logout. 
                gigya.accounts.logout();
            }

            function back(){
                window.location.href = "http://localhost:8080/"
            }
            
            function loginHandler(response){ //listen the login events and execute the required logic
                var profile = response['user']; 
		        $('#profile-name').text("Welcome " + profile.firstName + "!"); 
		        $('.logged-out').fadeOut(function () {
			    $('.logged-in').fadeIn(); });
            }

            function logoutHandler(){//listen the logout event and execute the required logic
                $('a#userFirstname').text('');
			    $('.logged-in').fadeOut(function () {
				$('.logged-out').fadeIn(); })
            }
        </script>
    </head>

    <body>
        <div class="topnav">
            <a class="active" href="#home">Application 1</a>
            <a href="#" class="logged-out" onclick="login()">Login</a>
            <a href="#" class="logged-out" onclick="register()">Register</a>
            <a href="#" class="logged-out" onclick="subscribe()">Subscribe</a>
            <a href="#" id="profile-nav" class="logged-in" onclick="profile_update()">Profile Update</a>
            <a href="#" id="profile-name" class="logged-in">User</a>
            <a href="#" class="logged-in" onclick="logout()">Logout</a>
            <a href="#" onclick="back()">Back</a>
            
        </div>
    </body>
</html>